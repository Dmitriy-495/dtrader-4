# üéâ –£–ª—É—á—à–µ–Ω–∏—è –≤ –∫–æ–¥–µ

## üìã –ß—Ç–æ –±—ã–ª–æ —É–ª—É—á—à–µ–Ω–æ

### 1. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ `app.ts`
**–§–∞–π–ª**: `bot/src/app.ts`

**–£–ª—É—á—à–µ–Ω–∏—è:**
- **–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `try/catch` –≤–µ–∑–¥–µ
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –£–ª—É—á—à–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Ç–∏–ø—ã
- **–£—Ç–∏–ª–∏—Ç—ã**: –í—ã–Ω–µ—Å–µ–Ω—ã –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —É—Ç–∏–ª–∏—Ç—ã
- **–°–æ—Å—Ç–æ—è–Ω–∏–µ**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **–õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```typescript
// –ë—ã–ª–æ: –ø—Ä—è–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
const { config } = require("./config/config");
let instanceSystem: any = null;

// –°—Ç–∞–ª–æ: –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
let instanceSystem: any = null;
let httpServer: any = null;
let wsServer: any = null;

// –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏—è
const logError = (message: string, error: unknown): void => {
  if (error instanceof Error) {
    console.error(`‚ùå ${message}:`, error.message);
  } else {
    console.error(`‚ùå ${message}:`, error);
  }
};
```

### 2. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ WebSocket
**–§–∞–π–ª**: `bot/src/app.ts`

**–£–ª—É—á—à–µ–Ω–∏—è:**
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ `app.ts`
- **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: InstanceSystem –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∏—Ä–∂–µ–π
- **–ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ—é –∑–æ–Ω—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```typescript
// WebSocket Server –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
const createWebSocketServer = (): any => {
  return new WebSocketServer({ port: config.WS_PORT });
};

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
const setupWebSocketHandlers = (wss: any): void => {
  wss.on("connection", (ws: any) => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
  });
};

// –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è
const setupStateBroadcast = (wss: any): void => {
  const stateManager = getStateManager();
  stateManager.subscribeToUpdates((_: string, message: string) => {
    // –¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º
  });
};
```

### 3. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤–µ–∑–¥–µ:**
```typescript
// –ë—ã–ª–æ: –ø—Ä–æ—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
} catch (error) {
  console.error('–û—à–∏–±–∫–∞:', error);
}

// –°—Ç–∞–ª–æ: —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
} catch (error: unknown) {
  if (error instanceof Error) {
    console.error(`‚ùå ${message}:`, error.message);
  } else {
    console.error(`‚ùå ${message}:`, error);
  }
}
```

### 4. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ù–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã:**
```typescript
const logError = (message: string, error: unknown): void => {
  if (error instanceof Error) {
    console.error(`‚ùå ${message}:`, error.message);
  } else {
    console.error(`‚ùå ${message}:`, error);
  }
};

const logSuccess = (message: string): void => {
  console.log(`‚úÖ ${message}`);
};

const logInfo = (message: string): void => {
  console.log(`‚ÑπÔ∏è  ${message}`);
};
```

### 5. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
**–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```typescript
// –ë—ã–ª–æ: –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
let instanceSystem: any = null;

// –°—Ç–∞–ª–æ: —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
let instanceSystem: any = null;
let httpServer: any = null;
let wsServer: any = null;
```

### 6. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
**–ü—Ä–∏–º–µ–Ω–µ–Ω–æ –≤–µ–∑–¥–µ:**
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–ª—É—á—à–µ–Ω–∏–π

### 1. –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 2. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ –ª–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π

| **–ú–µ—Ç—Ä–∏–∫–∞** | **–î–æ** | **–ü–æ—Å–ª–µ** | **–£–ª—É—á—à–µ–Ω–∏–µ** |
|-------------|--------|-----------|---------------|
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | –ü—Ä–æ—Å—Ç–∞—è | –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |
| –õ–æ–≥–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ | –£—Ä–æ–≤–Ω–∏ + –∫–æ–Ω—Ç–µ–∫—Å—Ç | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ | –ú–æ–Ω–æ–ª–∏—Ç | –ú–æ–¥—É–ª—å–Ω–∞—è | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |
| –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –°–ª–∞–±–∞—è | –°–∏–ª—å–Ω–∞—è | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |
| –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –°—Ä–µ–¥–Ω—è—è | –í—ã—Å–æ–∫–∞—è | ‚úÖ –£–ª—É—á—à–µ–Ω–æ |

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —É–ª—É—á—à–µ–Ω–∏–π:
```bash
# –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —É–∂–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
# –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ
```

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
node tests/final_test.js

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é
cd bot && npx tsc --noEmit src/app.ts
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [app.ts](app.ts) - –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
- [IMPROVEMENTS.md](IMPROVEMENTS.md) - –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç

## üôè –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–£–ª—É—á—à–µ–Ω–∏—è —É—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã!** –ö–æ–¥ —Ç–µ–ø–µ—Ä—å:

‚úÖ **–ù–∞–¥–µ–∂–Ω–µ–µ**: –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–µ–µ**: –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–µ–µ**: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–µ–µ**: –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ

**–í—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ! üéâ**

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `docs/` –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.